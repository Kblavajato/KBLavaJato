<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KB Lava Jato</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Roboto', sans-serif; }
    body { background-color:#f7f7f7; color:#333; scroll-behavior:smooth; }
    header { background:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.1); padding:10px 20px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:1000; }
    nav a { margin:0 10px; text-decoration:none; color:#333; font-weight:bold; }
    .logo { max-height:80px; }
    .hero { width:100%; max-height:500px; overflow:hidden; }
    .hero img { width:100%; object-fit:cover; }
    section { padding:40px 20px; text-align:center; background-color:#fff; }
    section h1, section h2 { font-size:2.2em; margin-bottom:10px; }
    .buttons { margin-top:20px; }
    .buttons a, form button { display:inline-flex; align-items:center; gap:8px; margin:10px; padding:10px 20px; background-color:#25D366; color:white; border-radius:5px; text-decoration:none; font-weight:bold; border:none; cursor:pointer; font-size:1em; transition:0.3s; }
    .buttons a.instagram { background-color:#C13584; }
    .buttons a:hover, form button:hover { opacity:0.9; }
    .galeria .fotos { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-top:30px; }
    .galeria .fotos img { width:100%; height:auto; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1); object-fit:cover; }
    .servicos table { margin:20px auto 0; width:90%; max-width:700px; border-collapse:collapse; box-shadow:0 4px 10px rgba(0,0,0,0.1); border-radius:10px; overflow:hidden; }
    .servicos th, .servicos td { padding:15px 20px; background:#fafafa; border-bottom:1px solid #ddd; text-align:left; font-size:1.1em; }
    .servicos th { background:#c0392b; color:white; font-weight:700; }
    .servicos tr:hover td { background:#fbeaea; }
    .servicos td.price { color:#c0392b; font-weight:bold; text-align:right; white-space:nowrap; }
    @media(max-width:600px) {
      .servicos table, .servicos thead, .servicos tbody, .servicos th, .servicos td, .servicos tr { display:block; }
      .servicos thead tr { position:absolute; top:-9999px; left:-9999px; }
      .servicos tr { margin-bottom:15px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1); background:#fff; padding:15px; }
      .servicos td { border:none; padding-left:50%; position:relative; text-align:left; background:transparent; }
      .servicos td::before { content:attr(data-label); position:absolute; left:15px; top:15px; font-weight:bold; color:#c0392b; white-space:nowrap; }
      .servicos td.price { text-align:left; padding-left:50%; }
    }
    form { max-width:500px; margin:0 auto; display:flex; flex-direction:column; gap:15px; }
    form input, form select, form textarea { padding:10px; font-size:1em; border:1px solid #ccc; border-radius:5px; resize:vertical; }
    footer { background:#222; color:#fff; padding:40px 20px; text-align:center; }
    .footer-content a { color:#25D366; text-decoration:none; }
    .footer-content a:hover { text-decoration:underline; }
  </style>
</head>
<body>

<header>
  <img src="1.png" alt="KB Lava Jato" class="logo" />
  <nav>
    <a href="#intro">In√≠cio</a>
    <a href="#sobre">Sobre</a>
    <a href="#servicos">Servi√ßos</a>
    <a href="#galeria">Galeria</a>
    <a href="#avaliacoes">Avalia√ß√µes</a>
    <a href="#contato">Contato</a>
    <a href="#agendamento">Agendamento</a>
  </nav>
</header>

<section class="hero">
  <img src="2.png" alt="Banner KB Lava Jato" />
</section>

<section class="intro" id="intro">
  <h1>Bem-vindo ao KB Lava Jato</h1>
  <p>Especialistas em lavagem automotiva de qualidade: simples, completa, detalhada e polimento profissional.</p>
  <div class="buttons">
    <a href="https://instagram.com/kevin.ribeirod" target="_blank" class="instagram"><i class="fa-brands fa-instagram"></i> Instagram</a>
  </div>
</section>

<section class="sobre" id="sobre">
  <h2>Sobre o KB Lava Jato</h2>
  <p>O <strong>KB Lava Jato</strong> nasceu com o prop√≥sito de oferecer um atendimento diferenciado e servi√ßos de qualidade para quem valoriza o cuidado com seu ve√≠culo...</p>
</section>

<section class="servicos" id="servicos">
  <h2>Nossos Servi√ßos</h2>
  <table>
    <thead>
      <tr>
        <th>Servi√ßo</th>
        <th>Descri√ß√£o</th>
        <th>Pre√ßo</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-label="Servi√ßo">Lavagem Simples</td>
        <td data-label="Descri√ß√£o">Remo√ß√£o b√°sica de sujeiras externas com jato d'√°gua e shampoo neutro.</td>
        <td data-label="Pre√ßo" class="price">R$ 20,00</td>
      </tr>
      <tr>
        <td data-label="Servi√ßo">Lavagem Completa</td>
        <td data-label="Descri√ß√£o">Lavagem externa e interna com aspira√ß√£o, painel, vidros e rodas.</td>
        <td data-label="Pre√ßo" class="price">R$ 40,00</td>
      </tr>
      <tr>
        <td data-label="Servi√ßo">Lavagem Detalhada</td>
        <td data-label="Descri√ß√£o">Higieniza√ß√£o minuciosa de cada canto do ve√≠culo.</td>
        <td data-label="Pre√ßo" class="price">R$ 60,00</td>
      </tr>
      <tr>
        <td data-label="Servi√ßo">Polimento</td>
        <td data-label="Descri√ß√£o">Restaura√ß√£o do brilho da pintura com ceras especiais.</td>
        <td data-label="Pre√ßo" class="price">R$ 100,00</td>
      </tr>
    </tbody>
  </table>
</section>

<section class="galeria" id="galeria">
  <h2>Galeria de Fotos</h2>
  <p>Confira alguns momentos do nosso dia a dia e veja a qualidade do nosso servi√ßo.</p>
  <div class="fotos">
    <img src="3.jpg" alt="Lavagem de carro no KB Lava Jato" loading="lazy" />
    <img src="4.jpg" alt="Motocicleta sendo lavada" loading="lazy" />
    <img src="5.jpg" alt="Produtos automotivos" loading="lazy" />
    <img src="6.jpg" alt="√Årea externa com ve√≠culos aguardando" loading="lazy" />
  </div>
</section>

<section class="avaliacoes" id="avaliacoes">
  <h2>Deixe sua Avalia√ß√£o</h2>
  <p>Gostou do nosso servi√ßo? Clique no bot√£o abaixo para deixar sua opini√£o no Google Forms:</p>
  <div class="buttons">
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfRjXz0QMM3ky2I3QoP5Y0Z0Te2xnO6kTrn_slBahCucvTYkw/viewform?usp=header" target="_blank">
      <i class="fa-solid fa-pen-to-square"></i> Avaliar
    </a>
  </div>
</section>

<section class="contato" id="contato">
  <h2>Fale Conosco</h2>
  <p>Preencha abaixo para falar direto conosco!</p>
  <form id="formulario">
    <input type="text" id="nome" placeholder="Seu nome" required />
    <textarea id="mensagem" placeholder="Digite sua mensagem" required></textarea>
    <button type="submit">Enviar Mensagem</button>
  </form>
</section>

<section class="agendamento" id="agendamento">
  <h2>Agende seu Servi√ßo</h2>
  <p>Escolha a data, hora e servi√ßo desejado e envie seu pedido de agendamento.</p>
  <form id="form-agendamento">
    <input type="text" id="agendamento-nome" placeholder="Seu nome" required />
    <input type="tel" id="agendamento-telefone" placeholder="Seu telefone" required />
    <input type="text" id="agendamento-placa" placeholder="Placa do ve√≠culo" maxlength="8" required />
    
    <label for="agendamento-veiculo" style="text-align:left;">Tipo de Ve√≠culo:</label>
    <select id="agendamento-veiculo" required>
      <option value="">Selecione</option>
      <option value="Carro">Carro</option>
      <option value="Moto">Moto</option>
    </select>

    <label for="agendamento-servico" style="text-align:left;">Servi√ßo:</label>
    <select id="agendamento-servico" required>
      <option value="">Selecione</option>
      <option value="Lavagem Simples">Lavagem Simples</option>
      <option value="Lavagem Completa">Lavagem Completa</option>
      <option value="Polimento">Polimento</option>
    </select>

    <input type="date" id="agendamento-data" required />

    <label for="agendamento-hora" style="text-align:left;">Hor√°rio:</label>
    <select id="agendamento-hora" required>
      <option value="">Selecione</option>
      <option>08:00</option>
      <option>09:00</option>
      <option>10:00</option>
      <option>11:00</option>
      <option>13:00</option>
      <option>14:00</option>
      <option>15:00</option>
      <option>16:00</option>
      <option>17:00</option>
    </select>

    <button type="submit">Agendar</button>
  </form>
</section>

<footer>
  <div class="footer-content">
    <div class="footer-contact">
      <h3>Contato</h3>
      <p>
        <a href="https://instagram.com/kevin.ribeirod" target="_blank">
          <i class="fa-brands fa-instagram"></i> @kevin.ribeirod
        </a>
      </p>
    </div>
    <p style="margin-top: 20px; font-size: 0.9em;">&copy; 2025 KB Lava Jato. Todos os direitos reservados.</p>
  </div>
</footer>

<!-- Firebase + EmailJS integrados -->
<script type="module">
  // Firebase SDK v9 (modular)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, collection, addDoc, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  // Configura√ß√£o do Firebase (sua)
  const firebaseConfig = {
    apiKey: "AIzaSyDQyboNI6oc2CSsENMYUWMM4N0A9zcF_NY",
    authDomain: "kb-lava-jato.firebaseapp.com",
    databaseURL: "https://kb-lava-jato-default-rtdb.firebaseio.com",
    projectId: "kb-lava-jato",
    storageBucket: "kb-lava-jato.firebasestorage.app",
    messagingSenderId: "545896027646",
    appId: "1:545896027646:web:635af9813686f445dd1caf",
    measurementId: "G-3T1FFG5L3Z"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // EmailJS (deve j√° estar incluso via script separado no <head>)
  import emailjs from "https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js";
  emailjs.init("go_0mb59RZJWklf3S"); // Sua public key

  // Formul√°rio de Agendamento
  const form = document.getElementById("form-agendamento");
  const botao = form.querySelector("button");

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    // Coleta dos dados
    const nome = document.getElementById('agendamento-nome').value;
    const telefone = document.getElementById('agendamento-telefone').value;
    const placa = document.getElementById('agendamento-placa').value.toUpperCase().replace(/\s/g, '');
    const veiculo = document.getElementById('agendamento-veiculo').value;
    const servico = document.getElementById('agendamento-servico').value;
    const data = document.getElementById('agendamento-data').value;
    const hora = document.getElementById('agendamento-hora').value;

    const dados = { nome, telefone, placa, veiculo, servico, data, hora };

    // Desativa o bot√£o enquanto processa
    botao.disabled = true;
    botao.textContent = "Enviando...";

    try {
      // Verifica se j√° existe um agendamento nesse hor√°rio
      const agendamentosRef = collection(db, "agendamentos");
      const q = query(agendamentosRef, where("data", "==", data), where("hora", "==", hora));
      const resultado = await getDocs(q);

      if (!resultado.empty) {
        alert("‚ùå Este hor√°rio j√° est√° agendado. Por favor, escolha outro.");
        botao.disabled = false;
        botao.textContent = "Agendar";
        return;
      }

      // 1. Envia o e-mail via EmailJS
      await emailjs.send("service_r18876j", "template_d9x4uep", dados);

      // 2. Salva no Firestore
      await addDoc(agendamentosRef, {
        ...dados,
        timestamp: new Date()
      });

      alert("‚úÖ Agendamento realizado com sucesso! Confira seu e-mail üì©");
      form.reset();

    } catch (error) {
      console.error("Erro:", error);
      alert("‚ùå Ocorreu um erro. Tente novamente.");
    }

    // Reativa o bot√£o
    botao.disabled = false;
    botao.textContent = "Agendar";
  });
</script>


</body>
</html>
